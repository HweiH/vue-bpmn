(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d82e94c0"],{1043:function(e,t,n){},"1b33":function(e,t,n){},"1dde":function(e,t,n){var i=n("d039"),s=n("b622"),o=n("2d00"),r=s("species");e.exports=function(e){return o>=51||!i((function(){var t=[],n=t.constructor={};return n[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,n){"use strict";var i=n("23e7"),s=n("5a34"),o=n("1d80"),r=n("ab13");i({target:"String",proto:!0,forced:!r("includes")},{includes:function(e){return!!~String(o(this)).indexOf(s(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,n){var i=n("861d"),s=n("c6b6"),o=n("b622"),r=o("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[r])?!!t:"RegExp"==s(e))}},"5a34":function(e,t,n){var i=n("44e7");e.exports=function(e){if(i(e))throw TypeError("The method doesn't accept regular expressions");return e}},"63f3":function(e,t,n){"use strict";var i=n("1043"),s=n.n(i);s.a},"65f0":function(e,t,n){var i=n("861d"),s=n("e8b5"),o=n("b622"),r=o("species");e.exports=function(e,t){var n;return s(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!s(n.prototype)?i(n)&&(n=n[r],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},8418:function(e,t,n){"use strict";var i=n("c04e"),s=n("9bf2"),o=n("5c6c");e.exports=function(e,t,n){var r=i(t);r in e?s.f(e,r,o(0,n)):e[r]=n}},"9b4d":function(e,t,n){"use strict";var i=n("1b33"),s=n.n(i);s.a},"9faa":function(e,t,n){"use strict";var i=n("a5f2"),s=n.n(i);s.a},a434:function(e,t,n){"use strict";var i=n("23e7"),s=n("23cb"),o=n("a691"),r=n("50c4"),a=n("7b0b"),l=n("65f0"),c=n("8418"),u=n("1dde"),d=n("ae40"),m=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,b=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!m||!p},{splice:function(e,t){var n,i,u,d,m,p,y=a(this),g=r(y.length),x=s(e,g),E=arguments.length;if(0===E?n=i=0:1===E?(n=0,i=g-x):(n=E-2,i=b(f(o(t),0),g-x)),g+n-i>h)throw TypeError(v);for(u=l(y,i),d=0;d<i;d++)m=x+d,m in y&&c(u,d,y[m]);if(u.length=i,n<i){for(d=x;d<g-i;d++)m=d+i,p=d+n,m in y?y[p]=y[m]:delete y[p];for(d=g;d>g-i+n;d--)delete y[d-1]}else if(n>i)for(d=g-i;d>x;d--)m=d+i-1,p=d+n-1,m in y?y[p]=y[m]:delete y[p];for(d=0;d<n;d++)y[d+x]=arguments[d+2];return y.length=g-i+n,u}})},a5f2:function(e,t,n){},ab13:function(e,t,n){var i=n("b622"),s=i("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[s]=!1,"/./"[e](t)}catch(i){}}return!1}},ae40:function(e,t,n){var i=n("83ab"),s=n("d039"),o=n("5135"),r=Object.defineProperty,a={},l=function(e){throw e};e.exports=function(e,t){if(o(a,e))return a[e];t||(t={});var n=[][e],c=!!o(t,"ACCESSORS")&&t.ACCESSORS,u=o(t,0)?t[0]:l,d=o(t,1)?t[1]:void 0;return a[e]=!!n&&!s((function(){if(c&&!i)return!0;var e={length:-1};c?r(e,1,{enumerable:!0,get:l}):e[1]=1,n.call(e,u,d)}))}},b727:function(e,t,n){var i=n("0366"),s=n("44ad"),o=n("7b0b"),r=n("50c4"),a=n("65f0"),l=[].push,c=function(e){var t=1==e,n=2==e,c=3==e,u=4==e,d=6==e,m=5==e||d;return function(p,f,b,h){for(var v,y,g=o(p),x=s(g),E=i(f,b,3),T=r(x.length),D=0,O=h||a,S=t?O(p,T):n?O(p,0):void 0;T>D;D++)if((m||D in x)&&(v=x[D],y=E(v,D,g),e))if(t)S[D]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return D;case 2:l.call(S,v)}else if(u)return!1;return d?-1:c||u?u:S}};e.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6)}},c5c2:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"containers",staticClass:"containers"},[n("div",{ref:"canvas",staticClass:"canvas",attrs:{id:"js-canvas"}}),n("ul",{staticClass:"buttons"},[n("li",[e._v("下载")]),n("li",[n("a",{ref:"saveDiagram",attrs:{href:"javascript:",title:"download BPMN diagram"}},[e._v("BPMN diagram")])]),n("li",[n("a",{ref:"saveSvg",attrs:{href:"javascript:",title:"download as SVG image"}},[e._v("SVG image")])]),n("el-upload",{staticClass:"import",attrs:{"show-file-list":!1,action:"","auto-upload":!1,"on-change":e.changeFile}},[n("li",[n("a",{ref:"import",attrs:{slot:"trigger",href:"javascript:",title:"import BPMN diagram"},slot:"trigger"},[e._v("导入 BPMN diagram")])])])],1),n("Panel",{ref:"panel",attrs:{element:e.element,businessObject:e.businessObject,moddle:e.moddle,modeling:e.modeling}})],1)},s=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.show?n("div",{staticClass:"panelWrapper"},[n("div",{staticClass:"panelHeader"},[e._v(e._s(e.form.id))]),n("el-form",{staticClass:"panelForm",attrs:{model:e.form,"label-position":"top"}},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"普通",name:"general"}},[n("el-form-item",{attrs:{label:"Id"}},[n("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.updateAttr("id",t)}},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.updateAttr("name",t)}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),["bpmn:StartEvent"].includes(e.businessObject.$type)?["bpmn:TimerEventDefinition"==e.startEventType?[n("el-form-item",{attrs:{label:"Timer Definition Type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},on:{change:e.updateTime},model:{value:e.timeDefinitionType,callback:function(t){e.timeDefinitionType=t},expression:"timeDefinitionType"}},e._l(e.timeDefinitionTypeList,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e.timeDefinitionType?[n("el-form-item",{attrs:{label:"Timer Definition",required:""}},["Date"==e.timeDefinitionType?n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择"},on:{change:e.updateProperties},model:{value:e.FormalExpression.body,callback:function(t){e.$set(e.FormalExpression,"body",t)},expression:"FormalExpression.body"}}):n("el-input",{attrs:{size:"mini"},on:{change:e.updateProperties},model:{value:e.FormalExpression.body,callback:function(t){e.$set(e.FormalExpression,"body",t)},expression:"FormalExpression.body"}})],1),"Cycle"==e.timeDefinitionType?n("el-form-item",{attrs:{label:"endDate"}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"mini","value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择"},on:{change:e.updateProperties},model:{value:e.FormalExpression.endDate,callback:function(t){e.$set(e.FormalExpression,"endDate",t)},expression:"FormalExpression.endDate"}})],1):e._e()]:e._e()]:e._e(),n("el-form-item",{attrs:{label:"初始化用户变量"}},[n("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.updateAttr("initiator",t)}},model:{value:e.form.initiator,callback:function(t){e.$set(e.form,"initiator",t)},expression:"form.initiator"}})],1)]:e._e(),["bpmn:UserTask"].includes(e.businessObject.$type)?[n("el-form-item",{attrs:{label:"候选群"}},[n("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.updateAttr("candidateGroups",t)}},model:{value:e.form.candidateGroups,callback:function(t){e.$set(e.form,"candidateGroups",t)},expression:"form.candidateGroups"}})],1),n("el-form-item",{attrs:{label:"候选人"}},[n("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.updateAttr("candidateUser",t)}},model:{value:e.form.candidateUser,callback:function(t){e.$set(e.form,"candidateUser",t)},expression:"form.candidateUser"}})],1),n("el-form-item",{attrs:{label:"优先级别"}},[n("el-input",{attrs:{size:"mini",type:"number",min:"1",max:"100"},on:{change:function(t){return e.updateAttr("priority",t)}},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})],1)]:e._e(),["bpmn:SequenceFlow"].includes(e.businessObject.$type)?[n("el-form-item",{attrs:{label:"Condition Type"}},[e._v(" "+e._s(e.conditionType)+" "),n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},on:{change:e.updateConditionType},model:{value:e.conditionType,callback:function(t){e.conditionType=t},expression:"conditionType"}},e._l(e.conditionTypeList,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),"Expression"==e.conditionType?n("el-form-item",{attrs:{label:"Expression"}},[n("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.updateAttr("conditionExpression",e.form.conditionExpression)}},model:{value:e.form.conditionExpression.body,callback:function(t){e.$set(e.form.conditionExpression,"body",t)},expression:"form.conditionExpression.body"}})],1):e._e()]:e._e(),e.form.documentation&&e.form.documentation[0]?n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea",size:"mini"},on:{change:function(t){return e.updateAttr("documentation",e.form.documentation)}},model:{value:e.form.documentation[0].text,callback:function(t){e.$set(e.form.documentation[0],"text",t)},expression:"form.documentation[0].text"}})],1):e._e()],2),e.formType.includes(e.businessObject.$type)?n("el-tab-pane",{attrs:{label:"表单",name:"form"}},[n("el-form-item",{attrs:{label:"表单Id"}},[n("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.updateAttr("formKey",t)}},model:{value:e.form.formKey,callback:function(t){e.$set(e.form,"formKey",t)},expression:"form.formKey"}})],1),n("el-form-item",{attrs:{label:"表单字段"}},[n("el-button",{staticClass:"tableBtn",attrs:{disabled:!e.currentRow,type:"text"},on:{click:e.delFP}},[n("i",{staticClass:"el-icon-remove"})]),n("el-button",{staticClass:"tableBtn",attrs:{type:"text"},on:{click:e.addFP}},[n("i",{staticClass:"el-icon-circle-plus"})]),n("el-table",{staticClass:"fpTable",staticStyle:{width:"100%"},attrs:{border:"","show-header":!1,data:e.formProperty,"highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[n("el-table-column",{attrs:{prop:"id"}})],1)],1),e.currentRow?[n("div",{staticClass:"title"},[e._v("字段属性")]),n("el-form-item",{attrs:{label:"id"}},[n("el-input",{attrs:{size:"mini"},on:{change:e.updateProperties},model:{value:e.currentRow.id,callback:function(t){e.$set(e.currentRow,"id",t)},expression:"currentRow.id"}})],1),n("el-form-item",{attrs:{label:"类型"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",placeholder:"请选择"},on:{change:e.updateProperties},model:{value:e.currentRow.type,callback:function(t){e.$set(e.currentRow,"type",t)},expression:"currentRow.type"}},e._l(e.formPropertyTypeList,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),n("el-form-item",{attrs:{label:"名称"}},[n("el-input",{attrs:{size:"mini"},on:{change:e.updateProperties},model:{value:e.currentRow.name,callback:function(t){e.$set(e.currentRow,"name",t)},expression:"currentRow.name"}})],1),n("el-form-item",{attrs:{label:"默认值"}},[n("el-input",{attrs:{size:"mini"},on:{change:e.updateProperties},model:{value:e.currentRow.default,callback:function(t){e.$set(e.currentRow,"default",t)},expression:"currentRow.default"}})],1)]:e._e()],2):e._e()],1)],1)],1):e._e()},r=[],a=(n("c740"),n("caad"),n("a434"),n("d3b7"),n("2532"),n("ddb0"),{name:"Panel",props:{element:{},businessObject:{default:function(){return{}}},modeling:{},moddle:{}},data:function(){return{show:!1,activeName:"general",form:{documentation:[{}]},formProperty:[],currentRow:"",extensionElements:"",formPropertyTypeList:["long","string","boolean","date","enum","custom type"],formType:["bpmn:StartEvent","bpmn:UserTask"],eventTypeHandle:{"bpmn:UserTask":{handle:"userTaskHandle"},"bpmn:StartEvent":{handle:"startEventHandle"},"bpmn:TimerEventDefinition":{handle:"timerEventHandle"},"bpmn:MessageEventDefinition":{handle:"ms"}},timeDefinitionTypeList:["Date","Duration","Cycle"],timeDefinitionType:"",startEventType:"",FormalExpression:"",conditionTypeList:["Expression",""],conditionType:""}},methods:{init:function(){this.show=!0,this.activeName="general",this.formType.includes(this.businessObject.$type)&&(this.nomalHandle(),this.handle(this.businessObject.$type),this.businessObject.eventDefinitions&&this.businessObject.eventDefinitions[0]?this.satrtEventDefinitionHandle():this.startEventType="startEventType"),this.defaultHandle(),this.currentRow="",this.form=this.businessObject},defaultHandle:function(){var e=this.businessObject.documentation&&this.businessObject.documentation.length?this.businessObject.documentation:[this.moddle.create("bpmn:Documentation",{text:""})],t={documentation:e};this.formType.includes(this.businessObject.$type)&&(t.extensionElements=this.extensionElements),this.modeling.updateProperties(this.element,t),this.formType.includes(this.businessObject.$type)&&(this.formProperty=this.extensionElements.values),["bpmn:SequenceFlow"].includes(this.businessObject.$type)&&(this.conditionType=this.businessObject.conditionExpression?"Expression":"")},nomalHandle:function(){this.extensionElements=this.businessObject.extensionElements||this.moddle.create("bpmn:ExtensionElements",{values:[]}),this.modeling.updateProperties(this.element,{extensionElements:this.extensionElements})},startEventHandle:function(e){console.log(e)},userTaskHandle:function(e){this.businessObject.exclusive=!0,console.log(e)},satrtEventDefinitionHandle:function(){this.startEventType=this.businessObject.eventDefinitions[0].$type,this.handle(this.startEventType)},timerEventHandle:function(e){e&&console.log(e),this.businessObject.eventDefinitions[0].timeDate?this.timeDefinitionType="Date":this.businessObject.eventDefinitions[0].timeDuration?this.timeDefinitionType="Duration":this.businessObject.eventDefinitions[0].timeCycle&&(this.timeDefinitionType="Cycle"),this.timeDefinitionType&&(this.FormalExpression=this.businessObject.eventDefinitions[0]["time".concat(this.timeDefinitionType)])},handle:function(e){try{this[this.eventTypeHandle[e].handle](e)}catch(t){console.log("暂无此类型的事件处理")}},updateConditionType:function(e){e?"Expression"==e&&(this.businessObject.conditionExpression=this.moddle.create("bpmn:FormalExpression",{body:""})):this.businessObject.conditionExpression&&delete this.businessObject.conditionExpression,this.updateProperties()},updateTime:function(e){this.businessObject.eventDefinitions[0]=this.moddle.create("bpmn:TimerEventDefinition");var t="time".concat(e);this.FormalExpression=this.moddle.create("bpmn:FormalExpression",{body:""}),"timeCycle"===t&&this.$set(this.FormalExpression,"endDate",""),this.businessObject.eventDefinitions[0][t]=this.FormalExpression,this.updateProperties()},updateAttr:function(e,t){this.businessObject[e]=t,this.updateProperties()},delFP:function(){var e=this,t=this.formProperty.findIndex((function(t){return t.id==e.currentRow.id}));this.formProperty.splice(t,1),this.updateProperties()},addFP:function(){var e=this.moddle.create("activiti:FormProperty",{id:"FormProperty_"+this.random(1e5,999999)});this.extensionElements.get("values").push(e),this.updateProperties(),console.log(this.formProperty,this.extensionElements)},updateProperties:function(){var e={};this.formType.includes(this.businessObject.$type)&&(e.extensionElements=this.extensionElements),["bpmn:TimerEventDefinition"].includes(this.businessObject.$type)&&(e.eventDefinitions=this.businessObject.eventDefinitions),["bpmn:SequenceFlow"].includes(this.businessObject.$type)?e.conditionExpression=this.businessObject.conditionExpression:e.documentation=this.businessObject.documentation,this.modeling.updateProperties(this.element,e),console.log(this.businessObject)},random:function(e,t){return Math.floor(Math.random()*(t-e))+e},handleCurrentChange:function(e){this.currentRow=e}}}),l=a,c=(n("9b4d"),n("9faa"),n("2877")),u=Object(c["a"])(l,o,r,!1,null,"06ea9c0b",null),d=u.exports,m=n("7024"),p=n("7a6b"),f=n("7356"),b=n("b474"),h={components:{Panel:d},data:function(){return{businessObject:null,element:null,moddle:null,modeling:null,bpmnModeler:null,containers:null,canvas:null,xmlStr:null,customTranslateModule:{translate:["value",b["a"]]}}},methods:{openDiagram:function(e){var t=this;this.bpmnModeler.importXML(e,(function(e){e&&console.error(e),t.moddle=t.bpmnModeler.get("moddle"),t.modeling=t.bpmnModeler.get("modeling")}))},createNewDiagram:function(){var e=this,t="https://cdn.staticaly.com/gh/bpmn-io/bpmn-js-examples/dfceecba/starter/diagram.bpmn";this.$http.get(t).then((function(t){e.openDiagram(t.data)})).catch((function(e){console.log(e)}))},saveSVG:function(e){this.bpmnModeler.saveSVG(e)},saveDiagram:function(e){this.bpmnModeler.saveXML({format:!0},(function(t,n){e(t,n)}))},setEncoded:function(e,t,n){var i=encodeURIComponent(n);this.xmlStr=n,n&&(e.className="active",e.href="data:application/bpmn20-xml;charset=UTF-8,"+i,e.download=t)},changeFile:function(e){var t=this,n=new FileReader,i=e.raw;n.readAsText(i,"utf-8"),n.onload=function(e){var n=e.target.result;t.bpmnModeler.importXML(n,(function(e){e&&console.error(e)}))}}},mounted:function(){this.containers=this.$refs.containers;var e=this.$refs.canvas;this.bpmnModeler=new m["a"]({container:e,additionalModules:[this.$data.customTranslateModule],moddleExtensions:{activiti:f}});var t=this,n=this.$refs.saveDiagram,i=this.$refs.saveSvg;this.bpmnModeler.on("commandStack.changed",(function(){t.saveSVG((function(e,n){t.setEncoded(i,"diagram.svg",e?null:n)})),t.saveDiagram((function(e,i){t.setEncoded(n,"diagram.bpmn",e?null:i)}))})),this.bpmnModeler.on("bpmnElement.added",(function(e){t.element=e.element,t.businessObject=Object(p["getBusinessObject"])(t.element),t.$nextTick((function(){t.$refs.panel.init()}))})),this.bpmnModeler.on("element.click",(function(e){e.originalEvent.preventDefault(),e.originalEvent.stopPropagation(),t.element=e.element,t.businessObject=Object(p["getBusinessObject"])(t.element),t.$nextTick((function(){t.$refs.panel.init()}))})),this.createNewDiagram()}},v=h,y=(n("63f3"),Object(c["a"])(v,i,s,!1,null,null,null));t["default"]=y.exports},c740:function(e,t,n){"use strict";var i=n("23e7"),s=n("b727").findIndex,o=n("44d2"),r=n("ae40"),a="findIndex",l=!0,c=r(a);a in[]&&Array(1)[a]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!c},{findIndex:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},caad:function(e,t,n){"use strict";var i=n("23e7"),s=n("4d64").includes,o=n("44d2"),r=n("ae40"),a=r("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:!a},{includes:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),o("includes")},ddb0:function(e,t,n){var i=n("da84"),s=n("fdbc"),o=n("e260"),r=n("9112"),a=n("b622"),l=a("iterator"),c=a("toStringTag"),u=o.values;for(var d in s){var m=i[d],p=m&&m.prototype;if(p){if(p[l]!==u)try{r(p,l,u)}catch(b){p[l]=u}if(p[c]||r(p,c,d),s[d])for(var f in o)if(p[f]!==o[f])try{r(p,f,o[f])}catch(b){p[f]=o[f]}}}},e8b5:function(e,t,n){var i=n("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},fdbc:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}}}]);
//# sourceMappingURL=chunk-d82e94c0.b6b0bcfa.js.map